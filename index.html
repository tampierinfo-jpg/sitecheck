<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SiteCheck â€“ iPad</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      padding: 20px;
    }

    .wrap {
      max-width: 600px;
      margin: auto;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #333;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      padding: 12px 20px;
      background: #2563eb;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 14px;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
    }

    .ok {
      background: #d1fae5;
      color: #065f46;
    }

    .warn {
      background: #fef3c7;
      color: #92400e;
    }

    .bad {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Ampel */
    .ampel {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 15px 0;
    }
    .ampel div {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      opacity: .25;
      transition: opacity .2s, transform .2s;
    }
    .ampel .red { background: #e74c3c; }
    .ampel .yellow { background: #f1c40f; }
    .ampel .green { background: #2ecc71; }
    .ampel .on {
      opacity: 1;
      transform: scale(1.05);
      box-shadow: 0 0 0 3px rgba(0,0,0,.05);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ðŸ”’ SiteCheck â€“ iPad</h1>

      <!-- Ampel -->
      <div class="ampel">
        <div class="red"></div>
        <div class="yellow"></div>
        <div class="green"></div>
      </div>

      <input id="singleInput" type="text" placeholder="https://beispiel.de">
      <button id="btnOne">PrÃ¼fen</button>

      <h3>Liste prÃ¼fen</h3>
      <textarea id="listArea" placeholder="Eine URL pro Zeile"></textarea>
      <button id="btnList">Liste prÃ¼fen</button>

      <div id="output"></div>
    </div>
  </div>

  <script>
    const btnOne = document.getElementById("btnOne");
    const btnList = document.getElementById("btnList");
    const singleInput = document.getElementById("singleInput");
    const listArea = document.getElementById("listArea");
    const out = document.getElementById("output");

    const ampel = {
      red: document.querySelector(".ampel .red"),
      yellow: document.querySelector(".ampel .yellow"),
      green: document.querySelector(".ampel .green")
    };

    function setAmpel(color) {
      Object.values(ampel).forEach(l => l.classList.remove("on"));
      if (color && ampel[color]) ampel[color].classList.add("on");
    }

    function normalizeUrl(url) {
      try {
        if (!/^https?:\/\//i.test(url)) {
          url = "https://" + url;
        }
        return new URL(url);
      } catch {
        return null;
      }
    }

    function score(u) {
      if (!u) return { status: "bad", msg: "UngÃ¼ltige URL" };
      if (u.protocol !== "https:") {
        return { status: "warn", msg: "Kein HTTPS" };
      }
      return { status: "ok", msg: "OK" };
    }

    function render(res, url) {
      out.innerHTML = `
        <div class="result ${res.status}">
          <b>${url}</b><br>Status: ${res.msg}
        </div>
      `;
      setAmpel(res.status === "ok" ? "green" : res.status === "warn" ? "yellow" : "red");
    }

    btnOne.onclick = () => {
      const d = normalizeUrl(singleInput.value);
      const res = score(d);
      render(res, singleInput.value);
    };

    btnList.onclick = () => {
      out.innerHTML = "";
      const lines = listArea.value.split(/\n/).map(s => s.trim()).filter(Boolean);
      lines.forEach(line => {
        const d = normalizeUrl(line);
        const res = score(d);
        out.innerHTML += `
          <div class="result ${res.status}">
            <b>${line}</b><br>Status: ${res.msg}
          </div>
        `;
      });
    };
  </script>
</body>
</html>
